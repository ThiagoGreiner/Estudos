# Herança

Herança é um mecanismo da Programação Orientada a Objetos que permite que uma classe (filha/derivada) herde atributos e métodos de outra classe (pai/base).

**Ou seja:** Reaproveita código e pode especializar comportamentos.

### Ex Herança

Aqui criamos uma classe abstrata (principal) para após isso podermos criar uma classe filha.

```php

// Classe Abstrata
class Veiculo {
    protected string $marca;
    protected int $ano;

    public function __construct (
        string $marca, 
        int $ano
    ) {
        $this->marca = $marca;
        $this->ano = $ano;
    }

    public function info(): string {
        return "Marca: {$this->marca}, Ano: {$this->ano}";
    }
}

```

Aqui criamos uma classe filha e utilizamos o ``extends`` para informar que a classe abstrata dela sera a  ``Veiculo``.

Para herdar os atributos utilizamos ``parent`` seguido do método construtor já criado anteriormente.

> [!WARNING]
> As classes filhas geralmente são criadas em arquivos separados da classe abstrata. Cada classe filha possui um arquivo diferente.

```php

// Classe Filha
class Carro extends Veiculo {
    private int $portas;

    public function __construct (
        string $marca, 
        int $ano, 
        int $portas
        ) {
        // chama o construtor da classe pai
        parent::__construct($marca, $ano); 
        $this->portas = $portas;
    }

}

```
Este então seria o resultado.

```php

$carro = new Carro("Toyota", 2022, 4);
// Saída: Marca: Toyota, Ano: 2022, Portas: 4

```

## Polimorfismo

O polimorfismo permite que um mesmo método, função ou operador tenha comportamentos diferentes dependendo do contexto ou do tipo de dado que está sendo utilizado.

## Polimorfismo Por Sobreposição (Override)

Subclasses redefinem métodos herdados.

```php

class Animal {
    public function emitirSom() {
        echo "Som genérico de animal\n";
    }
}

// Classe filha de Animal
class Cachorro extends Animal {
    public function emitirSom() {
        // Redefinindo emitirSom para latido
        echo "Latido\n";
    }
}

// Classe filha de Animal
class Gato extends Animal {
    public function emitirSom() {
        // Redefinindo emitirSom para miau
        echo "Miau\n";
    }
}

```

## Polimorfismo Por (Interfaces)

Para criar interfaces usamos a palavra-chave ``interface`` em vez de ``class``

Classes diferentes implementam a mesma interface, mas com comportamentos distintos.

Usada quando classes diferentes precisam “falar a mesma língua”, mas não têm nada em comum além disso.

> [!WARNING]
> Dentro da interface só podem ser declarados os métodos (assinaturas). O corpo deve ser escrito pela classe que utilizar a ``interface``

```php

// Criando uma interface
interface Veiculo {
    // Assinatura do método mover
    public function mover();
}


class Carro implements Veiculo {
    public function mover() {
        //Escrevendo o método mover para um carro
        echo "O carro anda\n";
    }
}

class Aviao implements Veiculo {
    public function mover() {
        //Escrevendo o método mover para um avião
        echo "O avião voa\n";
    }
}

```

## Polimorfismo Com Métodos Mágicos (__call)

O ``__call`` é chamado quando você tenta usar um método que não existe.
Assim, você pode simular vários métodos diferentes com uma só função.

```php

class Calculadora {

    public function __call($nome, $argumentos) {
        if ($nome === "soma") {
            // soma tudo
            return array_sum($argumentos);
        }

        if ($nome === "multiplica") {
            // multiplica tudo
            return array_product($argumentos);
        }

        echo "Método $nome não existe.\n";
    }
}

$calc = new Calculadora();

// Retorna 9
echo $calc->soma(2, 3, 4) . "\n";
// Retorna 24
echo $calc->multiplica(2, 3, 4) . "\n";
// Retorna "Método subtrai não existe."
$calc->subtrai(5, 2); 

```